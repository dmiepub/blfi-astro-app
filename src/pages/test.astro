---
import { supabase } from '../lib/supabaseClient';

// Fetch data from Supabase (server-side)
const { data: users, error } = await supabase.from("users").select("*");
---

<html>
  <body>
    <h1>Users from Supabase</h1>

    {error && <p style="color: red;">Error: {error.message}</p>}

    {users && users.length > 0 ? (
      <table border="1" cellpadding="8" cellspacing="0">
        <thead>
          <tr>
            {Object.keys(users[0]).map((key) => (
              <th>{key}</th>
            ))}
          </tr>
        </thead>
        <tbody>
          {users.map((row) => (
            <tr>
              {Object.values(row).map((val) => (
                <td>{val?.toString()}</td>
              ))}
            </tr>
          ))}
        </tbody>
      </table>
    ) : (
      <p>No records found</p>
    )}
  </body>
</html>
